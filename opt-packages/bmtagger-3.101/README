The tagging process assumes that we have process limit of at least 8.5 Gb.
Executables provided are 64-bit dynamically linked linux executables.
Please contact
  Richa Agarwala (richa@helix.nih.gov)
  Kirill Rotmistrovsky (rotmistr@ncbi.nlm.nih.gov)
if you need binaries on other platforms.

Steps done once per reference genome are:

1. Make index for bmfilter using command
     bmtool -d <reference.fa> -o <reference.bitmask> -w 18
   where reference.fa is fasta file for the screening database. For
   HMP, this can be the human genome. Output is a binary file generated
   in reference.bitmask
      To make a compressed index, add flag "-z" to the above command line.

2. Make index for srprism
     srprism mkindex -i <reference.fa> -o <reference.srprism> -M 7168
   This generates files with prefix reference.srprism

3. Make blastdb for blast
     makeblastdb -in <reference.fa> -dbtype nucl
   This generates database files for blastn. makeblastdb and blastn
   can be downloaded from blast distribution:
   ftp://ftp.ncbi.nlm.nih.gov/blast/executables/release/LATEST/

Commands for running the tagger depend on the data source for reads.
 - For single reads in fasta format, the command is:
     bmtagger.sh -b reference.bitmask -x reference.srprism -T tmp -q 0 -1 <file.fa> -o <file.out>
 - For paired reads in fasta format, the command is:
     bmtagger.sh -b reference.bitmask -x reference.srprism -T tmp -q 0 -1 <mate1.fa> -2 <mate2.fa> -o <file.out>
 - For single reads in fastq format, the command is:
     bmtagger.sh -b reference.bitmask -x reference.srprism -T tmp -q 1 -1 <file.fq> -o <file.out>
 - For paired reads in fastq format, the command is:
     bmtagger.sh -b reference.bitmask -x reference.srprism -T tmp -q 1 -1 <mate1.fq> -2 <mate2.fq> -o <file.out>
 - For reads read directly from SRA, the command is:
     bmtagger.sh -b reference.bitmask -x reference.srprism -T tmp -A <run> -o <outdir>
   Note that the application assumes that if a run is specified, then the SRA structure has been installed as per
   the directions in SRA toolkit.
In all above scenarios, -b, -x, and -T specify the index for bmfilter, index for srprism, and directory to use for
temporary files. If no temporary directory is specified, current working directory is used. Flag -q of 0 and 1
specify fasta and fastq input files, respectively. Output specified by -o is a file name if input is fasta or
fastq, and it is a directory if the input is a run. The output for, say run SRR059480, when -o is my_results will
be a file my_results/SRR059480.blacklist that contains the SRA indexes of reads found to be human rather than the
full id. Output files with inputs as fasta or fastq contain the ids of reads found to be human.

See README.bmtagger.txt, README.bmfilter.txt and README.bmtool.txt for more details.
